name: "Godot Export and Upload"
on: push
env:
  GODOT_VERSION: 4.2
  EXPORT_NAME: tile-jumper-exodus
  
jobs:
  export-web:
    name: Web Export
    runs-on: ubuntu-20.04
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: export game
        id: export
        # Use latest version (see releases for all versions)
        uses: firebelley/godot-export@v5.2.0
        with:
            # Defining all the required inputs
            godot_executable_download_url: https://downloads.tuxfamily.org/godotengine/4.0/Godot_v4.0-stable_linux.x86_64.zip
            godot_export_templates_download_url: https://downloads.tuxfamily.org/godotengine/4.0/Godot_v4.0-stable_export_templates.tpz
            relative_project_path: ./
            #archive_output: true
            
      - name: Upload to itch.io
        uses: dulvui/itchio-butler-upload@v0.0.1
        with:
            working-directory: "build/web"
            api-key: ${{ secrets.BUTLER_CREDENTIALS }}
            user: maximmaeder
            game: tile-jumper-exodus
            channel: html5